1. maven继承与聚合
2. springboot与spring-cloud版本对应
3. SpringCloud是多个解决方案的集合
# 服务注册与发现
## Eureka
两个组件：
1. Eureka Server 微服务节点会在Eureka Server中注册。
2. Eureka Client  和Eureka Server交互，会默认向Eureka Server发送心跳(默认间隔30s)，多个心跳周期未收到心跳，会将该节点从Eureka Server中移除
三个角色：
1. 服务注册中心（Register Service）：它是一个 Eureka Server，用于提供服务注册和发现功能。
2. 服务提供者（Provider Service）：它是一个 Eureka Client，用于提供服务。它将自己提供的服务注册到服务注册中心，以供服务消费者发现。
3. 服务消费者（Consumer Service）：它是一个 Eureka Client，用于消费服务。它可以从服务注册中心获取服务列表，调用所需的服务。
# 服务调用-负载均衡
## Ribbon
提供客户端的负载均衡和服务调用
常见的负载均衡方式有两种：
* 服务端负载均衡 
    客户端请求，该请求
* 客户端负载均衡 
    Ribbon 和 Eureka 一起使用时，Ribbon 会从 Eureka Server（服务注册中心）中获取服务端列表，然后通过负载均衡策略将请求分摊给多个服务提供者
* CAS+自旋锁
##open Feign
等价于TestTemplate+Ribbon
# 服务调用-容错保护
## Hystrix 
用户请求需要多个服务配合完成，如果服务链条中一个出错，会导致整条链路雪崩
当某个服务单元发生故障后，通过断路器的故障监控，向调用方返回一个符合预期的、可处理的备选响应。
1.服务降级
服务器服务降级

客户端服务降级
通常情况下，我们都会在客户端进行服务降级，当客户端调用的服务端的服务不可用时，客户端直接进行服务降级处理，避免其线程被长时间、不必要地占用。
2.服务熔断
当微服务系统中的某个微服务不可用或响应时间太长时，为了保护系统的整体可用性，熔断器会暂时切断请求对该服务的调用，并快速返回一个友好的错误响应。
这种熔断状态不是永久的，在经历了一定的时间后，熔断器会再次检测该微服务是否恢复正常，若服务恢复正常则恢复其调用链路。
熔断机制中涉及了三种熔断状态：
* 熔断关闭状态（Closed）：当服务访问正常时，熔断器处于关闭状态，服务调用方可以正常地对服务进行调用。
* 熔断开启状态（Open）：默认情况下，在固定时间内接口调用出错比率达到一个阈值（例如 50%），熔断器会进入熔断开启状态。进入熔断状态后，后续对该服务的调用都会被切断，熔断器会执行本地的降级（FallBack）方法。
* 半熔断状态（Half-Open）： 在熔断开启一段时间之后，熔断器会进入半熔断状态。在半熔断状态下，熔断器会尝试恢复服务调用方对服务的调用，允许部分请求调用该服务，并监控其调用成功率。如果成功率达到预期，则说明服务已恢复正常，熔断器进入关闭状态；如果成功率仍旧很低，则重新进入熔断开启状态。
3.服务限流

#服务网关
## SpringCloud Gateway
在客户端和服务之间又加了一层网关

#服务配置
## SpringCloud Config
每个微服务都有一个application.yml配置，管理难度大。Config为微服务提供集中化的外部配置支持
Spring Cloud Config 可以将各个微服务的配置文件集中存储在一个外部的存储仓库或系统（例如 Git(默认配置) 、SVN 等）中，对配置的统一管理，以支持各个微服务的运行。
* Spring Cloud Config 包含以下两个部分：
Config Server：也被称为分布式配置中心，它是一个独立运行的微服务应用，用来连接配置仓库并为客户端提供获取配置信息、加密信息和解密信息的访问接口。
Config Client：指的是微服务架构中的各个微服务，它们通过 Config Server 对配置进行管理，并从 Config Sever 中获取和加载配置信息。
* Spring Cloud Config 工作流程如下：
开发或运维人员提交配置文件到远程的 Git 仓库。
Config 服务端（分布式配置中心）负责连接配置仓库 Git，并对 Config 客户端暴露获取配置的接口。
Config 客户端通过 Config 服务端暴露出来的接口，拉取配置仓库中的配置。
Config 客户端获取到配置信息，以支持服务的运行。

# 消息总线 
## SpringCloud Bus
通过轻量级的消息代理（例如 RabbitMQ、Kafka 等）将微服务架构中的各个服务连接起来，实现广播状态更改、事件推送等功能，还可以实现微服务之间的通信功能。
ConfigClient实例都监听MQ中同一个topic，当一个服务刷新数据时，它会把这个信息放入topic中，这样监听这个Topic的服务就能得到通知，然后更新自身的配置。
* 全局广播配置
* 动态定点通知

# 消息驱动
## SpringCloud Stream
屏蔽底层消息中间件[RabbitMQ、kafka]间的差异。
* 标准消息队列的特点
  1.生产者/消费者之间靠消息媒介传递消息内容Message
  2.消息走特定的通道MessageChannel
* SpringCloud Stream的特点
  定义binder绑定器作为中间层，实现应用程序和中间件细节之间的隔离。

# 服务链路追踪
## Spring Cloud Sleuth
跟踪复杂的分布式调用连理
